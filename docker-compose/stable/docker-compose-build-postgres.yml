---

version: '3'

services:
# gvm-master
  gvm-master-stable-postgres:
    build:
      context: ../../dockerfile
      dockerfile: Dockerfile-gvm-master
      args:
        OS: ${OS}
        OS_VERSION: ${OS_VERSION}
        STAGE: ${STAGE}
        DATABASE: postgres
    image: "${DOMAIN}/gvm-source:master-${VERSION}-postgres-${STAGE}"
  gvm-master-postgres:
    build:
      context: ../../dockerfile
      dockerfile: Dockerfile-gvm-master
      args:
        OS: ${OS}
        OS_VERSION: ${OS_VERSION}
        STAGE: ${STAGE}
        DATABASE: postgres
    image: "${DOMAIN}/gvm-source:master-${VERSION}-postgres"
  gvm-master-latest-postgres:
    build:
      context: ../../dockerfile
      dockerfile: Dockerfile-gvm-master
      args:
        OS: ${OS}
        OS_VERSION: ${OS_VERSION}
        STAGE: ${STAGE}
        DATABASE: postgres
    image: "${DOMAIN}/gvm-source:master-latest-postgres"
  gvm-latest-postgres:
    build:
      context: ../../dockerfile
      dockerfile: Dockerfile-gvm-master
      args:
        OS: ${OS}
        OS_VERSION: ${OS_VERSION}
        STAGE: ${STAGE}
        DATABASE: postgres
    image: "${DOMAIN}/gvm-source:latest-postgres"

# gvm-slave
  gvm-slave-stable-postgres:
    build:
      context: ../../dockerfile
      dockerfile: Dockerfile-gvm-slave
      args:
        OS: ${OS}
        OS_VERSION: ${OS_VERSION}
        STAGE: ${STAGE}
        DATABASE: postgres
    image: "${DOMAIN}/gvm-source:slave-${VERSION}-postgres-${STAGE}"
  gvm-slave-postgres:
    build:
      context: ../../dockerfile
      dockerfile: Dockerfile-gvm-slave
      args:
        OS: ${OS}
        OS_VERSION: ${OS_VERSION}
        STAGE: ${STAGE}
        DATABASE: postgres
    image: "${DOMAIN}/gvm-source:slave-${VERSION}-postgres"
  gvm-slave-latest-postgres:
    build:
      context: ../../dockerfile
      dockerfile: Dockerfile-gvm-slave
      args:
        OS: ${OS}
        OS_VERSION: ${OS_VERSION}
        STAGE: ${STAGE}
        DATABASE: postgres
    image: "${DOMAIN}/gvm-source:slave-latest-postgres"

# gvm-slave
  gvm-sshvpn-stable-postgres:
    build:
      context: ../../dockerfile
      dockerfile: Dockerfile-gvm-sshvpn
      args:
        OS: ${OS}
        OS_VERSION: ${OS_VERSION}
        STAGE: ${STAGE}
        DATABASE: postgres
    image: "${DOMAIN}/gvm-source:sshvpn-${VERSION}-postgres-${STAGE}"
  gvm-sshvpn-postgres:
    build:
      context: ../../dockerfile
      dockerfile: Dockerfile-gvm-sshvpn
      args:
        OS: ${OS}
        OS_VERSION: ${OS_VERSION}
        STAGE: ${STAGE}
        DATABASE: postgres
    image: "${DOMAIN}/gvm-source:sshvpn-${VERSION}-postgres"
  gvm-sshvpn-latest-postgres:
    build:
      context: ../../dockerfile
      dockerfile: Dockerfile-gvm-sshvpn
      args:
        OS: ${OS}
        OS_VERSION: ${OS_VERSION}
        STAGE: ${STAGE}
        DATABASE: postgres
    image: "${DOMAIN}/gvm-source:sshvpn-latest-postgres"
